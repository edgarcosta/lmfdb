{% extends 'homepage.html' %}
{% block content %}

<h2> Further refine search </h2>

<form id='re-search' onsubmit="cleanSubmit(this.id)">
  {% include 'hidden_search_inputs.html' %}
  {{ info.search_array.html(info) | safe }}
  <table>
    {% set search_types = [('List', 'List of Results'), ('Random', 'Random Result')] %}
    <tr>
      <td><button type='submit' name='search_type' value='{{info.search_type}}' style="width: 170px;" onclick='resetStart()'>Search again</button></td>
      {% for type, desc in search_types %}
      {% if info.search_type != type %}
      <td><button type='submit' name='search_type' value='{{ type }}' style="width: 170px;">{{ desc }}</button></td>
      {% endif %}
      {% endfor %}
    </tr>
  </table>
</form>

{% include 'matches.html' %}
{% if info.number %}
<table class="ntdata">
<tr>
<th>Field</th>
<th>{{ KNOWL('mf.bianchi.level', title='Level') }} </th>
<th>Label</th>
<th>{{ KNOWL('mf.bianchi.newform', title='Dimension') }} </th>
<th>{{ KNOWL('mf.bianchi.sign', title='Sign') }} </th>
<th>{{ KNOWL('mf.bianchi.base_change', title='Base change') }} </th>
<th>{{ KNOWL('mf.bianchi.cm', title='CM') }} </th>
</tr>
{% for form in info.results: %}
<tr>
<td>{{form.field_label}}</td>
<td><a href={{url_for("bmf.render_bmf_space_webpage",field_label=form.field_label,
       level_label=form.level_label)}}>{{form.level_label}}</a> {#$={{form.level_ideal}}$#}</td>
<td align='left'><a href="{{form.url}}">
    {{form.short_label}} </a></td>
<td align='center'>{{form.dimension}}</td>
<td align='center'>{{form.sfe}}</td>
<td align='center'>{{form.bc}}</td>
<td align='center'>{{form.cm}}</td>
</tr>
{% endfor %}
</table>
<hr>
{% include 'forward_back.html' %}
{% include 'dummy_download_search_results.html' %}
{% endif %}
{% include 'debug_info.html' %}

{% endblock %}
